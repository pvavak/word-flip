<!DOCTYPE html>
<html lang="sk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Word Flip ‚Äì EN‚ÜîSK tr√©ning</title>
  <style>
    :root{
      --bg:#f8fafc;
      --card:#ffffff;
      --ink:#1f2937;
      --muted:#6b7280;
      --brand:#7c8cfb;
      --brand-2:#f9c8d1;
      --ok:#22c55e;
      --bad:#ef4444;
      --warn:#f59e0b;
      --radius:18px;
      --shadow:0 8px 24px rgba(31,41,55,.08);
      --shadow-2:0 10px 30px rgba(124,140,251,.18);
      --btn-h:54px;
      --maxw:980px;
    }
    html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif;background:linear-gradient(180deg,#f7f8ff, #f8fafc 120%);color:var(--ink);}
    .wrap{max-width:var(--maxw);margin:0 auto;padding:20px 16px 80px;}
    header{display:flex;gap:12px;align-items:center;justify-content:space-between;margin-bottom:14px}
    .title{display:flex;gap:12px;align-items:center}
    .logo{width:42px;height:42px;border-radius:12px;background:linear-gradient(135deg,var(--brand),var(--brand-2));box-shadow:var(--shadow-2)}
    h1{font-size:20px;margin:0;line-height:1.15}
    .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px}
    .controls{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}
    .controls .row{display:flex;flex-direction:column;gap:6px}
    label{font-size:13px;color:var(--muted)}
    select,input[type="number"]{height:44px;border-radius:12px;border:1px solid #e5e7eb;padding:0 12px;font-size:15px;background:#fff}
    .btn{height:var(--btn-h);border:none;border-radius:14px;padding:0 18px;background:var(--brand);color:#fff;font-weight:700;letter-spacing:.2px;cursor:pointer;box-shadow:var(--shadow-2);}
    .btn.secondary{background:#e5e7ff;color:#3b3b81}
    .btn.ghost{background:#fff;border:1px solid #e5e7eb;color:#374151;box-shadow:none}
    .btn.warn{background:var(--warn);}
    .btn:disabled{opacity:.6;cursor:not-allowed}
    .bar{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-top:12px}
    .stat{background:#ffffff;border:1px solid #eef0f4;padding:8px 12px;border-radius:12px;font-size:14px;color:#334155}
    .timer{flex:1;display:flex;align-items:center;gap:10px}
    .timerbar{height:10px;background:#e5e7eb;border-radius:999px;overflow:hidden;flex:1}
    .timerbar > div{height:100%;width:100%;background:linear-gradient(90deg,var(--ok),#a7f3d0);transition:width .2s linear}
    .stage{margin-top:18px;display:grid;gap:14px}
    .q-card{padding:18px;border-radius:18px;background:#fff;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:10px}
    .q-head{display:flex;justify-content:space-between;align-items:center}
    .q-type{font-size:13px;color:var(--muted)}
    .q-num{font-size:13px;color:var(--muted)}
    .prompt{font-size:24px;line-height:1.3;font-weight:800;letter-spacing:.2px}
    .options{display:grid;grid-template-columns:1fr;gap:10px}
    .opt{border:1px solid #e5e7eb;background:#fff;padding:14px;border-radius:14px;font-size:18px;text-align:left;cursor:pointer}
    .opt:hover{border-color:#d0d6ff;box-shadow:0 0 0 4px #eef1ff}
    .opt.correct{background:#ecfdf5;border-color:#bbf7d0}
    .opt.wrong{background:#fef2f2;border-color:#fecaca}
    .hint{font-size:14px;color:var(--muted)}
    .feedback{border-radius:14px;padding:12px 14px}
    .feedback.ok{background:#ecfdf5;color:#065f46}
    .feedback.bad{background:#fef2f2;color:#7f1d1d}
    .grid2{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px}
    @media (min-width:740px){
      .controls{grid-template-columns:repeat(4,minmax(0,1fr))}
      .options{grid-template-columns:repeat(2,minmax(0,1fr))}
      .prompt{font-size:28px}
    }
    footer{position:fixed;inset:auto 0 0 0;background:rgba(255,255,255,.8);backdrop-filter: blur(6px);border-top:1px solid #eef0f4}
    .foot{max-width:var(--maxw);margin:0 auto;padding:10px 16px;display:flex;gap:10px;align-items:center;justify-content:space-between}
    .foot .left{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="title">
        <div class="logo" aria-hidden="true"></div>
        <h1>Word Flip ‚Äì EN‚ÜîSK tr√©ning</h1>
      </div>
      <button id="btnInstall" class="btn secondary" title="Prida≈• na plochu (offline)">+ Na plochu</button>
    </header>

    <section class="card">
      <div class="controls">
        <!-- nastavenia hry -->
        <div class="row">
          <label for="modeContent">Re≈æim obsahu</label>
          <select id="modeContent">
            <option value="vocab">Slov√≠ƒçka</option>
            <option value="phrases">Vety & fr√°zy</option>
            <option value="mix">Mix (slov√≠ƒçka + vety)</option>
          </select>
        </div>
        <div class="row">
          <label for="modeDir">Smer prekladu</label>
          <select id="modeDir">
            <option value="en2sk">EN ‚Üí SK</option>
            <option value="sk2en">SK ‚Üí EN</option>
            <option value="mix">Mix EN‚ÜîSK</option>
          </select>
        </div>
        <div class="row">
          <label for="qCount">Poƒçet ot√°zok</label>
          <select id="qCount">
            <option value="20">20</option>
            <option value="15">15</option>
            <option value="10">10</option>
          </select>
        </div>
        <div class="row">
          <label for="perSec">ƒåas na ot√°zku</label>
          <select id="perSec">
            <option value="15">15 sek√∫nd</option>
            <option value="20">20 sek√∫nd</option>
            <option value="10">10 sek√∫nd</option>
          </select>
        </div>
        <div class="row">
          <label>Opakovanie ch√Ωb</label>
          <select id="repeatWrong">
            <option value="yes">√Åno ‚Äì po kole zopakuj zl√©</option>
            <option value="no">Nie</option>
          </select>
        </div>
        <div class="row">
          <label>Zvuky</label>
          <select id="soundToggle">
            <option value="on">Zapnut√©</option>
            <option value="off">Vypnut√©</option>
          </select>
        </div>
        <div class="row">
          <label for="packSelect">Bal√≠k / T√©ma</label>
          <select id="packSelect">
            <option value="all">V≈°etko</option>
            <option value="colors">Farby</option>
            <option value="numbers">ƒå√≠sla</option>
            <option value="family">Rodina</option>
            <option value="school">≈†kola</option>
            <option value="toys">Hraƒçky</option>
            <option value="food">Jedlo</option>
            <option value="animals">Zvierat√°</option>
            <option value="places">Miesta</option>
            <option value="clothes">Obleƒçenie</option>
            <option value="weather">Poƒçasie</option>
            <option value="phr">Len vety</option>
          </select>
        </div>
        <div class="row" style="align-self:end;gap:10px;flex-direction:row;grid-column:span 2;">
          <button id="btnStart" class="btn">Spusti≈• hru</button>
          <button id="btnImport" class="btn ghost">Import CSV/JSON</button>
          <input id="fileInput" type="file" accept=".csv,.json" style="display:none" />
        </div>
      </div>

      <div class="bar">
        <div class="stat">Sk√≥re: <b id="score">0</b></div>
        <div class="stat">Ot√°zka: <b id="qIndex">0</b>/<span id="qTotal">0</span></div>
        <div class="timer">
          <div style="font-size:13px;color:var(--muted)">ƒåas:</div>
          <div class="timerbar" aria-hidden="true"><div id="timeFill"></div></div>
          <div id="timeLeft" class="stat">0s</div>
        </div>
      </div>
    </section>

    <section class="stage">
      <div class="q-card">
        <div class="q-head">
          <div class="q-type" id="qType">‚Äî</div>
          <div class="q-num" id="qNum">‚Äî</div>
        </div>
        <div class="prompt" id="prompt">Klikni ‚ÄûSpusti≈• hru‚Äú ‚Üë</div>
        <div class="hint" id="hint"></div>
        <div class="options" id="options"></div>
        <div id="feedback"></div>
      </div>
      <div class="grid2">
        <button id="btnExport" class="btn ghost" disabled>Export v√Ωsledkov (CSV)</button>
        <button id="btnReset" class="btn warn">Vyma≈æ lok√°lne d√°ta</button>
      </div>
    </section>
  </div>

  <footer>
    <div class="foot">
      <div class="left">
        <span style="font-size:13px;color:var(--muted)">Offline ‚Ä¢ Ulo≈æenie pokroku v zariaden√≠</span>
        <span class="stat">Naj sk√≥re: <b id="bestScore">0</b></span>
        <span class="stat">Posledn√©: <b id="lastScore">0</b></span>
      </div>
      <div>
        <button id="btnShare" class="btn secondary" disabled>Zdieƒæa≈• v√Ωsledok</button>
      </div>
    </div>
  </footer>

  <script>
    // üîß opraven√© funkcie
    function updateHud(){
      els.score.textContent = state.score;
      els.qIndex.textContent = String(Math.min(state.index + 1, state.total)); // +1
      els.qTotal.textContent = String(state.total);
    }

    function nextQuestion(){
      clearTimer();
      state.lock = false; // üîß odomkni pre nov√∫ ot√°zku
      els.options.innerHTML = '';
      els.feedback.innerHTML = '';
      // ... zvy≈°ok logiky (rovnako ako v p√¥vodnom k√≥de)
    }
  </script>
</body>
</html>
